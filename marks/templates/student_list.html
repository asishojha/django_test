{% extends 'base.html' %}
{% load static %}
{% block content %}
<section class="bg-info" style="min-height: calc(100vh - 111px);">
    <div class="container-fluid">
        <div class="row justify-content-center pt-5">
            <div class=" col-sm-10 text-center">
                <p class="h2">
                    {{ userx.username }} <span> : {{userx.first_name}}</span><br>
                </p>
                <table class="table table-striped mb-0">
                    <thead>
                        <tr>
                            <th scope="col">Reg Male</th>
                            <th scope="col">Reg Female</th>
                            <th scope="col">Total</th>
                            <th scope="col">Marks Entry Left</th>
                            <th scope="col">Marks Entry Completed</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">{{regm}}</th>
                            <td>{{regf}}</td>
                            <td>{{tot}}</td>
                            <td>{{left}}</td>
                            <td>{{done}}</td>
                        </tr>
                    </tbody>
                </table>
                <div>
                    {% if first_student %}
                    <div class="text-center">
                        <a href="{{first_student.get_absolute_url }}" class="btn btn-success my-1">Start Entering Marks</a>
                    </div>
                    {% endif %}
                    <table class="table table-striped table-dark">
                        <thead>
                            <tr>
                                <th scope="col">Roll-Number</th>
                                <th scope="col">Name</th>
                                <th scope="col">Father's Name</th>
                                <th scope="col">Registration No.</th>
                                <th scope="col">1st Language</th>
                                <th scope="col">2nd Language</th>
                                <th scope="col">Is Marks Filled</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for s in users %}
                            <tr>
                                <th scope="row"><a href="{{ s.get_absolute_url }}">{{s.rollno}}</a></th>
                                <td>{{s.name}}</td>
                                <td>{{s.fname}}</td>
                                <td>{{s.regno}}</td>
                                <td>{{s.get_fl_name}}</td>
                                <td>{{s.get_sl_name}}</td>
                                <td>{% if s.fl|length < 1 %}No{% else %}Yes{% endif %}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <div class="container p-4">
                        <div class="pagination justify-content-center">
                            <span class="step-links">
                                {% if users.has_previous %}
                                <a href="?page=1" class="bg-success text-white">&laquo; first</a>
                                <a href="?page={{ users.previous_page_number }} " class="bg-danger text-white">previous</a>
                                {% endif %}
                                <span class="current">
                                    Page {{ users.number }} of {{ users.paginator.num_pages }}
                                </span>
                                {% if users.has_next %}
                                <a href="?page={{ users.next_page_number }}" class="bg-danger text-white">next</a>
                                <a href="?page={{ users.paginator.num_pages }}" class="bg-success text-white">last &raquo;</a>
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
{% block script %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
$('form').submit(function(e) {
    $(':disabled').each(function(e) {
        $(this).removeAttr('disabled');
    });
});
</script>
{% endblock %}